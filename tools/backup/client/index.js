/* 
██    ██ ███████ ████████  █████  ██     ██      █████  ██████  ██████  ███████ ███████     ███████ ███████ ██████  ██     ██ ███████ ██████   █████  
██    ██ ██         ██    ██   ██ ██     ██     ██   ██ ██   ██ ██   ██ ██      ██          ██      ██      ██   ██ ██     ██ ██      ██   ██ ██   ██ 
██    ██ ███████    ██    ███████ ██  █  ██     ███████ ██   ██ ██████  █████   ███████     ███████ █████   ██████  ██  █  ██ █████   ██████  ███████ 
██    ██      ██    ██    ██   ██ ██ ███ ██     ██   ██ ██   ██ ██   ██ ██           ██          ██ ██      ██   ██ ██ ███ ██ ██      ██   ██ ██   ██ 
 ██████  ███████    ██    ██   ██  ███ ███      ██   ██ ██████  ██   ██ ███████ ███████     ███████ ███████ ██   ██  ███ ███  ███████ ██   ██ ██   ██ */

let server = '10.0.1.47:8080'

/* 
██    ██ ███████ ████████  █████  ██     ██      █████  ██████  ██████  ███████ ███████     ███████ ███████ ██████  ██     ██ ███████ ██████   █████  
██    ██ ██         ██    ██   ██ ██     ██     ██   ██ ██   ██ ██   ██ ██      ██          ██      ██      ██   ██ ██     ██ ██      ██   ██ ██   ██ 
██    ██ ███████    ██    ███████ ██  █  ██     ███████ ██   ██ ██████  █████   ███████     ███████ █████   ██████  ██  █  ██ █████   ██████  ███████ 
██    ██      ██    ██    ██   ██ ██ ███ ██     ██   ██ ██   ██ ██   ██ ██           ██          ██ ██      ██   ██ ██ ███ ██ ██      ██   ██ ██   ██ 
 ██████  ███████    ██    ██   ██  ███ ███      ██   ██ ██████  ██   ██ ███████ ███████     ███████ ███████ ██   ██  ███ ███  ███████ ██   ██ ██   ██ */






//reszta kodu
const fs = require('fs');
const { exit } = require('process');
const request = require('request');
let file = process.argv[2]
let dir = process.argv[3]
function fend(){
    exit();
}
fs.readFile(dir, 'utf8', function (err, data) {
    if (err) console.log("err", err)
    // console.log(data)
    let url = `http://${server}/?body=${encodeURIComponent(data)}&filename=${file}`
    console.log(url)
    options = {
        uri: url,
        json: false,
        method: 'GET',
        href: '',
        pathname: '/'
    };
    request(options, (err, res) => {
      if (err) { return console.log(err); }
      console.log(res.body,"zakończono przesyłać");
      setTimeout(fend, 2000);
    });
    
});